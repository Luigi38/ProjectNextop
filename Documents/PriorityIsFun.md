# 유니터란?
유니터는 현재 제가 개발 및 운영 중인 유니패드 IDE 프로그램입니다.
유니패드는 런치패드 연주를 위한 모바일 애플리케이션이며,
유니터는 런치패드 연주를 위한 컴퓨터 프로그램, 즉 유니패드 컴퓨터 버전이라고 볼 수 있습니다.

# 문제가 생기된 계기
저는 유니터의 런치패드 LED를 UI로 보여주는 코드를 볼 때 처음에는 어려운 코드인줄 알았는데
시간이 지나고 유니터 프로그램 동작 구조를 이해하게 되었을 때
그 코드는 어려운 코드가 아니라 스파게티 코드였구나 라고 생각하게 되었습니다.

또한 예전부터 런치패드 LED를 UI로 보여줄 때 렉이 걸린다고 제보가 종종 들어왔었습니다.
그래서 그 스파게티 코드를 정리라도 하며 버전을 올렸습니다.

그래도 렉이 걸리는 현상은 사라지지 않았죠..
그래서 저는 그 문제에 대해 긴 시간동안 매우매우 깊게 고민하였습니다.

# 문제의 정의
런치패드 LED를 UI로 보여주는 코드를 간단하게 설명하자면,
1. LED 이벤트를 List에 Add
2. for문으로 돌면서 LED 이벤트가 발생할 시간이 현재 시간과 같다면 그 LED 이벤트를 가져옴
3. LED를 UI에 보여줌
4. 그 LED 이벤트를 List에 Remove
5. 2번으로 돌아가서 무한반복

이렇게 설명할 수 있습니다.

문제는 4번입니다.
List에 값을 제거한다면 `Remove()` 함수의 시간 복잡도는 O(N) 입니다.
그런데 for문을 돌면서 `Remove()` 함수를 쓰니 시간 복잡도는 O(N^2) 인 것입니다.

최악의 케이스로 LED 이벤트가 15만개 정도 있다고 가정할시
225억번 정도 계산을 해야할 것입니다.

# 획기적인 기술을 배우게 된 계기
저는 컴퓨터 학원에서 위상 정렬이라는 한 알고리즘을 배우게 되면서
동시에 **우선순위 큐**라는 자료구조도 배우게 되었습니다.

그래서 우선순위 큐는 Queue 자료구조에 기반하며 Push하면 정렬된 상태로 값들이 나열 되어있다고 알고 있습니다.

# 획기적인 아이디어와 획기적인 기술의 콜라보
2021년 10월 24일, 수학학원을 가기 위해 밖으로 나왔습니다.
그런데 그 때, 갑자기 한 아이디어가 무의식적으로 떠올랐습니다.

"우선순위 큐는 정렬된 상태로 값들이 나열되어있다면, LED 이벤트가 발생할 시간을 정렬될 값으로 정해주면 List 대신 우선순위 큐를 쓰면 괜찮지 않을까?"
라는 간단한 아이디어이지만 쉽게 생각할 수 없는 아이디어였습니다.

< List >
- `Add()` : O(1)
- `Remove()` : O(N)

< Priority Queue >
- `Push()` : O(log N)
- `Pop()` : O(log N)

이런 정보를 바탕으로 `Remove()` 함수의 시간 복잡도가 O(N) 에서 **O(log N)**으로 매우 효율적으로 작동하게 됩니다.

저는 그 아이디어를 간단하게 GitHub Issues에 간단하게 메모하고 수학학원을 간 뒤,
수학학원이 끝나고 집에 도착하여 바로 코드를 뜯어고치기 시작했습니다.

